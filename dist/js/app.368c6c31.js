(function(e){function t(t){for(var n,s,o=t[0],u=t[1],c=t[2],p=0,h=[];p<o.length;p++)s=o[p],a[s]&&h.push(a[s][0]),a[s]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);l&&l(t);while(h.length)h.shift()();return i.push.apply(i,c||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,o=1;o<r.length;o++){var u=r[o];0!==a[u]&&(n=!1)}n&&(i.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},a={app:0},i=[];function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var l=u;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var n=r("64a9"),a=r.n(n);a.a},"095c":function(e,t){function r(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id="095c"},1:function(e,t){},"105f":function(e,t,r){"use strict";var n=r("18f0"),a=r.n(n);a.a},"18f0":function(e,t,r){},2:function(e,t){},3:function(e,t){},4:function(e,t){},5:function(e,t){},5506:function(e,t){function r(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id="5506"},"56d7":function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("f751"),r("097d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("Game")],1)},i=[],s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[this.gameOver?r("GameOver",{attrs:{score:Math.floor(100*this.player.radius),history:this.scores}}):r("GameRender",{attrs:{id:this.player.id,player:this.universe.player,radius:this.universe.radius,emoteq:this.emotes}}),r("div",{staticClass:"row"},[r("div",{staticClass:"col"},[r("div",{staticClass:"form-inline justify-content-center"},[r("div",{staticClass:"form-group mb-2"},[r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modaltutorial",modifiers:{modaltutorial:!0}}]},[e._v("Tutorial")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.playerName,expression:"playerName"}],staticClass:"form-control",attrs:{placeholder:"Name"},domProps:{value:e.playerName},on:{input:function(t){t.target.composing||(e.playerName=t.target.value)}}}),r("button",{staticClass:"btn btn-secondary",on:{click:function(t){return e.solidNameFill()}}},[e._v("Get name from SOLID")]),r("div",{staticClass:"dropdown"},[e._m(0),r("ul",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuButton"}},[r("li",[r("a",{attrs:{href:"#"},on:{click:function(t){e.playerSkin=1}}},[e._v("Skin 1")])]),r("li",[r("a",{attrs:{href:"#"},on:{click:function(t){e.playerSkin=2}}},[e._v("Skin 2")])])])]),r("button",{staticClass:"btn btn-primary",on:{click:function(t){return e.restart()}}},[e._v("Restart")])],1)]),r("br"),r("h2",[e._v("\n        Score:\n        "+e._s(Math.floor(100*e.player.radius))+"\n      ")]),r("h3",[e._v("\n        Player:\n        "+e._s(e.player.name)+"\n      ")])]),r("div",{staticClass:"col"},[r("h2",[e._v("\n        Current Leader:\n        "+e._s(this.top_player.name)+"\n      ")]),r("h2",[e._v("\n        Max Score:\n        "+e._s(Math.floor(100*this.top_player.score))+"\n      ")])])]),r("b-modal",{attrs:{id:"modaltutorial",title:"Tutorial","ok-only":!0}},[r("p",{staticClass:"my-4"},[e._v("\n      This is a game that is played live with others from around the Internet. Each other circle is\n      another player. The rules are simple:\n    ")]),r("ul",[r("li",[e._v("Keep moving to improve your score.")]),r("li",[e._v("The higher your score, the bigger you become.")]),r("li",[e._v("Touch another player and you both are out.")])]),r("p",{staticClass:"my-4"},[e._v("\n      The controls are:\n    ")]),r("ul",[r("li",[e._v("Use the arrow keys to move. The direction you press is the one the circle will move in. Hold it to be launched!")]),r("li",[e._v("Press the spacebar to show an emote in case you want to show off.")])]),r("p",{staticClass:"my-4"})])],1)},o=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a",{staticClass:"dropdown-toggle btn btn-danger",attrs:{"data-toggle":"dropdown",href:"#"}},[e._v("\n              Skins\n              "),r("b",{staticClass:"caret"})])}],u=(r("96cf"),r("3b8d")),c=(r("7f7f"),r("00e8")),l=r.n(c),p=r("851f"),h=r.n(p),f=r("bc3a"),d=r.n(f),m=r("72bf"),v=r.n(m),y=d.a.create({baseURL:"http://127.0.0.1:8081"}),w={getUniverse:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",y.get("universe").then(function(e){return e.data}).catch(function(e){return e}));case 1:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}(),createPlayer:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=v.a.stringify({name:t,skin:r}),e.abrupt("return",y.post("player",n,{headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){return e.data}).catch(function(e){return e}));case 2:case"end":return e.stop()}},e)}));function t(t,r){return e.apply(this,arguments)}return t}(),putPlayer:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=v.a.stringify(r),e.abrupt("return",y.put("player/".concat(t),n,{headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){return e.data}).catch(function(e){return e}));case 2:case"end":return e.stop()}},e)}));function t(t,r){return e.apply(this,arguments)}return t}(),getStats:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",y.get("stats").then(function(e){return e.data}).catch(function(e){return e}));case 1:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()},b=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div")},g=[],x=(r("6c7b"),r("a4bb")),_=r.n(x),O=(r("c5f6"),r("f077")),k=r("5118"),j=r("9ae0"),N=r.n(j),R={props:{player:{type:Object,required:!0},id:{type:Number,required:!0},radius:{type:Number,required:!0},emoteq:{type:Array}},data:function(){return{circles:{},bg:null,squiggles:[],beepaudio:new Audio(N.a)}},computed:{centered_player:function(){var e=this;if(!this.player[this.id])return{};var t=10*-this.player[this.id].x+this.two.width/2,r=10*+this.player[this.id].y+this.two.height/2;return _()(this.player).map(function(n){return{id:e.player[n].id,x:1*(10*e.player[n].x+t),y:1*(10*-e.player[n].y+r),r:10*e.player[n].radius,name:e.player[n].name,skin:e.player[n].skin}})}},methods:{centerBG:function(){if(this.player[this.id]){var e=10*-this.player[this.id].x+this.two.width/2,t=10*+this.player[this.id].y+this.two.height/2;this.bg.translation.set(e,t),this.bg.radius=10*this.radius}},playEmotes:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:while(this.emoteq.length>0)t=this.emoteq.pop(),this.playEmote(t);this.squiggles.forEach(function(e){e.rotation+=e.step});case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),playEmote:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(t){var r,n,a,i,s,o=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.beepaudio.play(),r=10*-this.player[this.id].x+this.two.width/2,n=10*+this.player[this.id].y+this.two.height/2,a=this.two.makeStar(10*this.player[t].x+r+20,10*-this.player[t].y+n-20,15,30,5),i="rgb(0, 191, 168)",a.noStroke(),a.fill=i,a.step=Math.floor(4)/8*Math.PI/60,s=this.squiggles.length,this.squiggles.push(a),Object(k["setTimeout"])(function(){o.two.remove(a),delete o.squiggles[s]},2e3);case 11:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),drawPlayer:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=this.two.makeCircle(t.x,t.y,t.r),n=new O["a"].Texture(this.getSpriteName(t.skin)),n.scale=.9,r.fill=n,r.text=this.two.makeText(t.name,t.x,t.y+t.r),this.circles[t.id]=r;case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),getSpriteName:function(e){return 1==e?"https://i.imgur.com/VY49ncB.jpg":2==e?"https://i.imgur.com/DRmh6S9.jpg":"https://i.imgur.com/DCZ4inB.jpg"},updatePlayer:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=this.circles[t.id],r.translation.set(t.x,t.y),r.radius=t.r,r.text.translation.set(t.x,t.y+t.r+10);case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},mounted:function(){var e=this;this.two=new O["a"]({fullscreen:!0}).appendTo(this.$el);var t=this.two.makeCircle(0,0,999999999);t.fill="#000000";var r="https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/5ce56e4a-99f6-4328-bec6-49efa78b3c78/d3a6a7c-1c5f1b91-5d5e-42f8-baa6-4d94f1f0fc53.png?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7InBhdGgiOiJcL2ZcLzVjZTU2ZTRhLTk5ZjYtNDMyOC1iZWM2LTQ5ZWZhNzhiM2M3OFwvZDNhNmE3Yy0xYzVmMWI5MS01ZDVlLTQyZjgtYmFhNi00ZDk0ZjFmMGZjNTMucG5nIn1dXSwiYXVkIjpbInVybjpzZXJ2aWNlOmZpbGUuZG93bmxvYWQiXX0.rJSNbt0e_P6HnAKr1bj2ACjfYGRc1-h01_bTuWBYhcs";this.bg=this.two.makeCircle(0,0,10*this.radius);var n=new O["a"].Texture(r);for(var a in this.bg.fill=n,this.centered_player)this.drawPlayer(this.centered_player[a]);this.two.bind("update",function(){e.centerBG();var t={};for(var r in e.centered_player)e.circles[e.centered_player[r].id]?e.updatePlayer(e.centered_player[r]):e.drawPlayer(e.centered_player[r]),t[e.centered_player[r].id]=e.circles[e.centered_player[r].id],delete e.circles[e.centered_player[r].id];for(var n in e.circles)e.two.remove(e.circles[n].text),e.two.remove(e.circles[n]);e.circles=t,e.playEmotes()}).play()}},T=R,C=r("2877"),M=Object(C["a"])(T,b,g,!1,null,null,null),S=M.exports,P=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("section",{staticClass:"container"},[e._m(0),r("br"),r("br"),r("br"),r("h1",[e._v("\n      Your score was "+e._s(this.score)+"\n      "),r("br"),e._v("\n      The average global score is "+e._s(Math.floor(100*this.stats.avgscore))+"\n    ")]),r("a",{staticClass:"twitter-share-button",attrs:{href:"https://twitter.com/intent/tweet?text=Yay! got a score of "+this.score+" on","data-size":"large"}},[e._v("\n      Tweet\n    ")]),r("h2",[e._v("Your other scores this session are:")]),e._l(this.history,function(t,n){return r("h3",{key:"score-"+n},[e._v(e._s(t))])})],2)])},E=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("h1",[r("span",{staticClass:"title"},[e._v("Game")]),r("br"),r("span",{staticClass:"title"},[e._v("Over")])])}],L=r("6bb1"),G=r.n(L),U={props:{score:{type:Number,required:!0},history:{type:Array}},data:function(){return{stats:{avgscore:0,avgduration:0}}},created:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,w.getStats();case 2:t=e.sent,this.stats=t,new Audio(G.a).play();case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=document.createElement("script"),t.setAttribute("src","https://platform.twitter.com/widgets.js"),t.setAttribute("charset","utf-8"),t.setAttribute("async",""),document.head.appendChild(t);case 5:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()},I=U,Z=(r("d6a9"),Object(C["a"])(I,P,E,!1,null,"5d684ae9",null)),D=Z.exports,Y={components:{GameOver:D,GameRender:S},data:function(){return{universe:{player:{"-1":{id:-1,x:0,y:0,radius:0}},radius:0},player:{id:-1,x:0,y:0,radius:0},gameOver:!1,playerName:"Player",playerSkin:1,restartLoading:!0,scores:[],emotes:[],allowEmote:!0}},computed:{top_player:function(){var e=this.player.radius,t=this.player.name;for(var r in this.universe.player){var n=this.universe.player[r];n.radius>e&&(e=n.radius,t=n.name)}return{score:e,name:t}}},created:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.restart(),setInterval(function(){this.restartLoading||(this.getUniverse(),this.checkGameOver())}.bind(this),33),window.addEventListener("keydown",function(e){t.gameOver||t.movePlayer(e.keyCode)}),window.addEventListener("keyup",function(e){t.gameOver||32==e.keyCode||t.movePlayer(null)});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),methods:{popupLogin:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l.a.currentSession();case 2:if(t=e.sent,r="https://solid.community/common/popup.html",t){e.next=8;break}return e.next=7,l.a.popupLogin({popupUri:r});case 7:t=e.sent;case 8:alert("Logged in as ".concat(t.webId));case 9:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}(),solidNameFill:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.popupLogin(),l.a.trackSession(function(e){var r=h.a.graph(),n=r.sym(e.webId),a=n.doc(),i=new h.a.Namespace("http://www.w3.org/2006/vcard/ns#"),s=new h.a.Fetcher(r);s.load(a).then(function(e){var a=r.any(n,i("fn")).value;t.playerName=a},function(e){alert("Load failed "+e)})});case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),restart:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.restartLoading=!0,this.gameOver=!1,e.next=4,this.createPlayer(this.playerName,this.playerSkin);case 4:return t=e.sent,e.next=7,this.getUniverse();case 7:this.player=t,this.restartLoading=!1;case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),checkGameOver:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:null==this.universe.player[this.player.id]?(this.gameOver||this.scores.push(Math.floor(100*this.player.radius)),this.gameOver=!0):this.player=this.universe.player[this.player.id];case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getUniverse:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,w.getUniverse();case 2:t=e.sent,this.universe=t;case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),createPlayer:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,w.createPlayer(t,r);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}));function t(t,r){return e.apply(this,arguments)}return t}(),movePlayer:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(t){var r,n,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r={up:!1,down:!1,left:!1,right:!1},e.t0=t,e.next=37===e.t0?4:38===e.t0?6:39===e.t0?8:40===e.t0?10:32===e.t0?12:14;break;case 4:return r.left=!0,e.abrupt("break",14);case 6:return r.up=!0,e.abrupt("break",14);case 8:return r.right=!0,e.abrupt("break",14);case 10:return r.down=!0,e.abrupt("break",14);case 12:return this.allowEmote&&(this.emotes.push(this.player.id),this.allowEmote=!1,Object(k["setTimeout"])(function(){a.allowEmote=!0},2e3)),e.abrupt("return");case 14:return e.next=16,w.putPlayer(this.player.id,r);case 16:if(n=e.sent,!(n instanceof Error)){e.next=19;break}return e.abrupt("return");case 19:this.player=n;case 20:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}},W=Y,q=(r("105f"),Object(C["a"])(W,s,o,!1,null,"379e19be",null)),J=q.exports,z={name:"app",components:{Game:J}},A=z,F=(r("034f"),Object(C["a"])(A,a,i,!1,null,null,null)),B=F.exports,V=r("9f7b"),Q=r.n(V);r("f9e3"),r("2dd8");n["a"].use(Q.a),n["a"].config.productionTip=!1,new n["a"]({render:function(e){return e(B)}}).$mount("#app")},6:function(e,t){},"64a9":function(e,t,r){},"6bb1":function(e,t,r){e.exports=r.p+"media/gameover.f768a2ef.wav"},7:function(e,t){},8:function(e,t){},9:function(e,t){},"92a4":function(e,t,r){},"9ae0":function(e,t,r){e.exports=r.p+"media/beep.9d6e9ab4.wav"},b93e:function(e,t,r){var n={"./N3Lexer":"5b17","./N3Lexer.js":"5b17","./N3Parser":"99f0","./N3Parser.js":"99f0","./N3Store":"0f05","./N3Store.js":"0f05","./N3StreamParser":"810d","./N3StreamParser.js":"810d","./N3StreamWriter":"87640","./N3StreamWriter.js":"87640","./N3Util":"c193","./N3Util.js":"c193","./N3Writer":"7d66","./N3Writer.js":"7d66"};function a(e){var t=i(e);return r(t)}function i(e){var t=n[e];if(!(t+1)){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}return t}a.keys=function(){return Object.keys(n)},a.resolve=i,e.exports=a,a.id="b93e"},d6a9:function(e,t,r){"use strict";var n=r("92a4"),a=r.n(n);a.a},dc27:function(e,t){function r(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id="dc27"}});
//# sourceMappingURL=app.368c6c31.js.map