(function(e){function t(t){for(var n,s,c=t[0],u=t[1],o=t[2],l=0,f=[];l<c.length;l++)s=c[l],a[s]&&f.push(a[s][0]),a[s]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);p&&p(t);while(f.length)f.shift()();return i.push.apply(i,o||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,c=1;c<r.length;c++){var u=r[c];0!==a[u]&&(n=!1)}n&&(i.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},a={app:0},i=[];function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var o=0;o<c.length;o++)t(c[o]);var p=u;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"010f":function(e,t,r){},"034f":function(e,t,r){"use strict";var n=r("64a9"),a=r.n(n);a.a},"44c0":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("f751"),r("097d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("Game")],1)},i=[],s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[this.gameOver?r("GameOver",{attrs:{score:Math.floor(100*this.player.radius)}}):r("GameRender",{attrs:{id:this.player.id,player:this.universe.player}}),r("div",{staticClass:"row"},[r("div",{staticClass:"col"},[r("div",{staticClass:"form-inline justify-content-center"},[r("div",{staticClass:"form-group mb-2"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.playerName,expression:"playerName"}],staticClass:"form-control",attrs:{placeholder:"Name"},domProps:{value:e.playerName},on:{input:function(t){t.target.composing||(e.playerName=t.target.value)}}}),r("div",{staticClass:"dropdown"},[e._m(0),r("ul",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuButton"}},[r("li",[r("a",{attrs:{href:"#"},on:{click:function(t){e.playerSkin=1}}},[e._v("Skin 1")])]),r("li",[r("a",{attrs:{href:"#"},on:{click:function(t){e.playerSkin=2}}},[e._v("Skin 2")])])])]),r("button",{staticClass:"btn btn-primary",on:{click:function(t){return e.restart()}}},[e._v("Restart")])])]),r("br"),r("h2",[e._v("\n        Score:\n        "+e._s(Math.floor(100*e.player.radius))+"\n      ")]),r("h3",[e._v("\n        Player:\n        "+e._s(e.player.name)+"\n      ")])]),r("div",{staticClass:"col"},[r("h2",[e._v("\n        Current Leader:\n        "+e._s(this.top_player.name)+"\n      ")]),r("h2",[e._v("\n        Max Score:\n        "+e._s(Math.floor(100*this.top_player.score))+"\n      ")])])])],1)},c=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a",{staticClass:"dropdown-toggle btn btn-danger",attrs:{"data-toggle":"dropdown",href:"#"}},[e._v("Skins"),r("b",{staticClass:"caret"})])}],u=(r("96cf"),r("3b8d")),o=(r("7f7f"),r("bc3a")),p=r.n(o),l=r("72bf"),f=r.n(l),h=p.a.create({baseURL:"http://info.gda.itesm.mx:5000"}),d={getUniverse:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",h.get("universe").then(function(e){return e.data}).catch(function(e){return e}));case 1:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}(),createPlayer:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=f.a.stringify({name:t,skin:r}),e.abrupt("return",h.post("player",n,{headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){return e.data}).catch(function(e){return e}));case 2:case"end":return e.stop()}},e)}));function t(t,r){return e.apply(this,arguments)}return t}(),putPlayer:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=f.a.stringify(r),e.abrupt("return",h.put("player/".concat(t),n,{headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){return e.data}).catch(function(e){return e}));case 2:case"end":return e.stop()}},e)}));function t(t,r){return e.apply(this,arguments)}return t}(),getStats:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",h.get("stats").then(function(e){return e.data}).catch(function(e){return e}));case 1:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()},m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div")},v=[],y=(r("6c7b"),r("a4bb")),w=r.n(y),g=(r("c5f6"),r("f077")),b={props:{player:{type:Object,required:!0},id:{type:Number,required:!0}},data:function(){return{circles:{}}},computed:{centered_player:function(){var e=this;if(!this.player[this.id])return{};var t=-this.player[this.id].x+this.two.width/2,r=+this.player[this.id].y+this.two.height/2;return w()(this.player).map(function(n){return{id:e.player[n].id,x:e.player[n].x+t,y:-e.player[n].y+r,r:10*e.player[n].radius,name:e.player[n].name,skin:e.player[n].skin}})}},methods:{drawPlayer:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=this.two.makeCircle(t.x,t.y,t.r),n=new g["a"].Texture(this.getSpriteName(t.skin)),n.scale=.9,r.fill=n,r.text=this.two.makeText(t.name,t.x,t.y+t.r),this.circles[t.id]=r;case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),getSpriteName:function(e){return 1==e?"https://i.imgur.com/VY49ncB.jpg":2==e?"https://i.imgur.com/DRmh6S9.jpg":"https://i.imgur.com/DCZ4inB.jpg"},updatePlayer:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=this.circles[t.id],r.translation.set(t.x,t.y),r.radius=t.r,r.text.translation.set(t.x,t.y+t.r+10);case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},mounted:function(){var e=this;for(var t in this.two=new g["a"]({fullscreen:!0}).appendTo(this.$el),this.centered_player)this.drawPlayer(this.centered_player[t]);this.two.bind("update",function(){var t={};for(var r in e.centered_player)e.circles[e.centered_player[r].id]?e.updatePlayer(e.centered_player[r]):e.drawPlayer(e.centered_player[r]),t[e.centered_player[r].id]=e.circles[e.centered_player[r].id],delete e.circles[e.centered_player[r].id];for(var n in e.circles)e.two.remove(e.circles[n].text),e.two.remove(e.circles[n]);e.circles=t}).play()}},x=b,_=r("2877"),k=Object(_["a"])(x,m,v,!1,null,null,null),O=k.exports,j=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("section",{staticClass:"container"},[e._m(0),r("br"),r("br"),r("br"),r("h1",[e._v("\n      Your score was "+e._s(this.score)+"\n      "),r("br"),e._v("\n      The average score is "+e._s(Math.floor(100*this.stats.avgscore))+"\n    ")]),r("a",{staticClass:"twitter-share-button",attrs:{href:"https://twitter.com/intent/tweet?text=Yay! got a score of "+this.score+" on","data-size":"large"}},[e._v("\n      Tweet\n    ")])])])},R=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("h1",[r("span",{staticClass:"title"},[e._v("Game")]),r("br"),r("span",{staticClass:"title"},[e._v("Over")])])}],C={props:{score:{type:Number,required:!0}},data:function(){return{stats:{avgscore:0,avgduration:0}}},created:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d.getStats();case 2:t=e.sent,this.stats=t;case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=document.createElement("script"),t.setAttribute("src","https://platform.twitter.com/widgets.js"),t.setAttribute("charset","utf-8"),t.setAttribute("async",""),document.head.appendChild(t);case 5:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()},P=C,S=(r("d7d7"),Object(_["a"])(P,j,R,!1,null,"0d8d606c",null)),N=S.exports,M={components:{GameOver:N,GameRender:O},data:function(){return{universe:{player:{"-1":{id:-1,x:0,y:0,radius:0}}},player:{id:-1,x:0,y:0,radius:0},gameOver:!1,playerName:"Player",playerSkin:1,restartLoading:!0}},computed:{top_player:function(){var e=this.player.radius,t=this.player.name;for(var r in this.universe.player){var n=this.universe.player[r];n.radius>e&&(e=n.radius,t=n.name)}return{score:e,name:t}}},created:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.restart(),setInterval(function(){this.restartLoading||(this.getUniverse(),this.checkGameOver())}.bind(this),33),window.addEventListener("keydown",function(e){t.gameOver||t.movePlayer(e.keyCode)});case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),methods:{restart:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.restartLoading=!0,this.gameOver=!1,e.next=4,this.createPlayer(this.playerName,this.playerSkin);case 4:return e.next=6,this.getUniverse();case 6:this.restartLoading=!1;case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),checkGameOver:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:null==this.universe.player[this.player.id]?this.gameOver=!0:this.player=this.universe.player[this.player.id];case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getUniverse:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d.getUniverse();case 2:t=e.sent,this.universe=t;case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),createPlayer:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d.createPlayer(t,r);case 2:n=e.sent,this.player=n;case 4:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}(),movePlayer:function(){var e=Object(u["a"])(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r={up:!1,down:!1,left:!1,right:!1},e.t0=t,e.next=37===e.t0?4:38===e.t0?6:39===e.t0?8:40===e.t0?10:12;break;case 4:return r.left=!0,e.abrupt("break",13);case 6:return r.up=!0,e.abrupt("break",13);case 8:return r.right=!0,e.abrupt("break",13);case 10:return r.down=!0,e.abrupt("break",13);case 12:return e.abrupt("return");case 13:return e.next=15,d.putPlayer(this.player.id,r);case 15:if(n=e.sent,!(n instanceof Error)){e.next=18;break}return e.abrupt("return");case 18:this.player=n;case 19:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}},T=M,E=(r("c9e1"),Object(_["a"])(T,s,c,!1,null,"70cdde62",null)),G=E.exports,$={name:"app",components:{Game:G}},L=$,U=(r("034f"),Object(_["a"])(L,a,i,!1,null,null,null)),A=U.exports,q=r("9f7b"),B=r.n(q);r("f9e3"),r("2dd8");n["a"].use(B.a),n["a"].config.productionTip=!1,new n["a"]({render:function(e){return e(A)}}).$mount("#app")},"64a9":function(e,t,r){},c9e1:function(e,t,r){"use strict";var n=r("44c0"),a=r.n(n);a.a},d7d7:function(e,t,r){"use strict";var n=r("010f"),a=r.n(n);a.a}});
//# sourceMappingURL=app.93bc3fdf.js.map